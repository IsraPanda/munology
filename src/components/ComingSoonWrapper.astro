---
// Coming Soonラッパーコンポーネント
// 本番環境でのみComing Soonコンテンツを表示
const isProduction = import.meta.env.PROD;
const currentPath = Astro.url.pathname;
const isContactPage = currentPath === '/contact' || currentPath === '/contact/';
const isThanksPage = currentPath === '/thanks' || currentPath === '/thanks/';
const isSitemapPage = currentPath.startsWith('/sitemap') || currentPath.startsWith('/robots.txt');

// 本番環境でContactページ、Thanksページ、サイトマップ以外の場合のみComing Soonを表示
const showComingSoon = isProduction && !isContactPage && !isThanksPage && !isSitemapPage;
---

{showComingSoon ? (
  <!-- Coming Soonコンテンツ -->
  <div class="min-h-screen bg-[#121212] text-[#E0E0E0] flex items-center justify-center pt-16">
    <div class="text-center max-w-6xl mx-auto px-6">
      <!-- メインアイコン（タイポグラフィ） -->
      <div class="flex justify-center mb-12">
        <picture>
          <source media="(max-width: 768px)" srcset="/images/typo_dark_rev2.png" />
          <img src="/images/typo_dark_rev2_optimized.svg" alt="MUNOLOGY" class="h-16 md:h-20 w-auto opacity-90 hover:opacity-100 transition-opacity duration-300" style="image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges;" />
        </picture>
      </div>
      
      <!-- Coming Soon タイトル -->
      <h1 class="text-4xl md:text-6xl lg:text-7xl font-black mb-8 hero-gradient-text tracking-tight font-noto animate-fade-in" style="line-height: 1.5;">
        Coming Soon
      </h1>
      
      <!-- サブタイトル -->
      <p class="text-lg md:text-xl text-gray-300 mb-12 font-noto">
        模擬国連から始める探究
      </p>
      
      <!-- カウントダウン -->
      <div class="mb-12">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 max-w-2xl mx-auto">
          <div class="card-bg rounded-xl p-2 md:p-3 text-center">
            <div class="text-lg md:text-xl font-bold text-blue-400" id="days">--</div>
            <div class="text-xs text-gray-400">日</div>
          </div>
          <div class="card-bg rounded-xl p-2 md:p-3 text-center">
            <div class="text-lg md:text-xl font-bold text-green-400" id="hours">--</div>
            <div class="text-xs text-gray-400">時間</div>
          </div>
          <div class="card-bg rounded-xl p-2 md:p-3 text-center">
            <div class="text-lg md:text-xl font-bold text-yellow-400" id="minutes">--</div>
            <div class="text-xs text-gray-400">分</div>
          </div>
          <div class="card-bg rounded-xl p-2 md:p-3 text-center">
            <div class="text-lg md:text-xl font-bold text-purple-400" id="seconds">--</div>
            <div class="text-xs text-gray-400">秒</div>
          </div>
        </div>
      </div>
      
      <!-- 公開予定日 -->
      <div class="mb-12">
        <p class="text-lg md:text-xl text-blue-400 font-bold font-noto">
          2025年11月17日公開予定
        </p>
      </div>
      
      <!-- MUNOLOGYとは -->
      <div class="max-w-4xl mx-auto mb-12">
        <h2 class="text-2xl md:text-3xl text-gray-300 mb-8 font-noto leading-relaxed">
          MUNOLOGYとは
        </h2>
        <p class="text-xl md:text-2xl text-gray-300 mb-8 font-noto leading-relaxed">
          MUNOLOGYは、もぎこっかーのための<span class="font-bold text-blue-400">国際法・国際関係情報サイト</span>です。
        </p>
        <p class="text-lg md:text-xl text-gray-400 font-noto leading-relaxed mb-6">
          "Beyond the conference"を掲げ、会議<span class="font-semibold text-purple-400">「後」</span>に重点を置いたコンテンツを提供していきます。<br>
          とくに、法学・政治学に関する<span class="font-semibold text-purple-400">よりハイレベルな探究</span>につながる知見を提供することで、
          会議後の熱を学びに変換していくことをサポートします。
        </p>
        <h2 class="text-2xl md:text-3xl text-gray-300 mb-8 font-noto leading-relaxed">
          提供予定コンテンツ
        </h2>
        <p class="text-lg md:text-xl text-gray-400 font-noto text-center mb-8">
          MUNOLOGYでは、次のようなコンテンツを提供し、もぎこっかーの学びをサポートする予定です。
        </p>
        <ul class="list-disc list-inside text-lg md:text-xl text-gray-400 font-noto text-left max-w-3xl mx-auto space-y-2">
          <li>もぎこっかーのための国際法・国際政治の基礎知識</li>
          <li>最新の国際法動向解説</li>
          <li>模擬国連頻出ワード・トピック分析</li>
          <li>模擬国連参加者のためのガイド</li>
          <li>先生方向けコンテンツ：模擬国連サポートのためのガイド</li>
        </ul>
      </div>
      
      <!-- 公開予定日詳細 -->
      <div class="max-w-4xl mx-auto mb-12">
        <h2 class="text-xl md:text-2xl text-gray-300 mb-6 font-noto leading-relaxed">
          公開予定日
        </h2>
        <p class="text-base md:text-lg text-gray-400 font-noto text-center mb-6">
          公開予定日は2025年11月17日です。公開まで今しばらくお待ちください。
        </p>
      </div>
      
      <!-- お問合せリンク -->
      <div class="text-center">
        <p class="text-lg md:text-xl text-gray-400 font-noto text-center mb-8">お問合せは<a href="/contact" class="text-blue-400"><span class="underline hover:text-blue-300 transition-colors duration-300">こちら</span></a></p>
      </div>
    </div>
  </div>
  
  <!-- カウントダウンスクリプト -->
  <script>
    // カウントダウン機能
    function updateCountdown() {
      const launchDate = new Date('2025-11-17T00:00:00').getTime();
      const now = new Date().getTime();
      const distance = launchDate - now;
      
      if (distance > 0) {
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
        const daysElement = document.getElementById('days');
        const hoursElement = document.getElementById('hours');
        const minutesElement = document.getElementById('minutes');
        const secondsElement = document.getElementById('seconds');
        
        if (daysElement) daysElement.textContent = days.toString();
        if (hoursElement) hoursElement.textContent = hours.toString();
        if (minutesElement) minutesElement.textContent = minutes.toString();
        if (secondsElement) secondsElement.textContent = seconds.toString();
      } else {
        // 公開日になったらリロード
        window.location.reload();
      }
    }
    
    // 1秒ごとに更新
    updateCountdown();
    setInterval(updateCountdown, 1000);
  </script>
  
  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-fade-in {
      animation: fade-in 0.8s ease-out;
    }
  </style>
) : (
  <!-- 通常のコンテンツ -->
  <slot />
)} 